## SPA（シングルページアプリケーション）とは  
ブラウザでリンクを遷移した場合（例えばyahooのニュースを表示した場合）やWebページをリフレッシュした際、タブの横にロード中のマークが表示され、画面が一瞬真っ白になった後画面が再描画されます。  

gif  

このような方法だと画面の表示に1秒くらい掛かってしまいます。  
余り頻繁に操作しない作業ならこれでも問題無いのですが、頻繁に操作するような画面だとこれがストレスになってしまいます。  
（例えばブラウザ版のoutlookやgmailなどで、メールをクリックする度に画面全体が再読み込みされるとが悪くなります。）  


これに対し、リクエストの方法の項で説明した**ajax**（JavascriptでHTTPリクエストを発行し画面の一部を置き換える処理）を利用すると、ページ全体を再読み込みせずにWebページを変更することが可能になります。  

**SPAとは、大部分の処理にajaxを利用し、従来の画面全体を遷移する処理を極力する無くしたWebサイトの事です。**    

ブラウザ版のoutlookやgmailはSPAといえます。  
メールをクリックすると、画面の再読み込み無くメールの本文が表示されます。  

gif

#### メリット  
- 操作感の良さ  
  SPAを利用するメリットは上でも述べましたがサクサク表示出来て操作感がよいことです。  
  業務アプリは頻繁に操作するものも多く、SPA形式にすることが多いです。 

- 画面遷移時のパラメータの引き渡しが容易  
  ページ全体を遷移する場合、画面の情報（Javascriptの変数など）は全てクリアされてしまいます。  
  その為、次の画面でも必要な情報がある場合、一旦サーバーに送るなどする必要があります。  
  Webサーバー側では、次の画面のHTMLを作る際に、送られた値を埋め込むような処理が必要です。  
  サーバー側、クライアント側の両方で処理が必要な為、少し手間になります。  
    
  SPAの場合、ページの再読み込みが行われない為、javascriptの（グローバルスコープの）変数に設定した値などもそのままになります。  
  Javascriptに保持した情報から画面を描画できる為、画面遷移処理をクライアント側だけで制御できます。  

#### デメリット  
- 実装が複雑になる
  メリットの項でページの再読み込みが行われない為、javascriptの変数がクリアされないと書きました。  
  ただ画面のリフレッシュしたり、URLをコピーして別タブで開かれたような場合、ブラウザバックされた場合はクリアされてしまいます。  
  
  そうした場合でも変更を維持したい画面の場合は、実装を工夫する必要があります。  
  例えば以下のような処理が必要です。  
  1. historyAPIというページ遷移無しURLを変更するjavascriptの関数を利用し、ページ書き換え時にパラメータ（開いているメールのidなど）をURLに追加。  
  2. ページロード時のイベントで上記パラメータを取得し、適切な処理（メールデータを取得するなど）を行います。  
  

- ファイルサイズが大きくなる  
  htmlにタグを書くより、javascriptでタグを生成する処理の方が文字数が多くなりがちです。  
  その為、Webサーバーからブラウザへのレスポンスのサイズが大きくなる傾向があります。  
  ネットワーク環境が悪い場合は影響が出る可能性があるので、ファイルサイズを削減する工夫をする必要があります。  
  （レスポンスの圧縮やキャッシュの利用など）  

### SPA利用時のコード
SPAを利用する場合は、HTMLは必要最小限の要素しかありません。  
大半の要素はjavascriptから動的に作成されます。  
例えば以下のようなHtmlになります。  

'''

※render()で要素やイベントを作成しています。
'''


