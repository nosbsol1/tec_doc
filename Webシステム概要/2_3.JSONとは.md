## Json
JSONとは「JavaScript Object Notation」の略で、「JavaScriptのオブジェクトの書き方を元にした、テキスト・ベースのデータ交換フォーマット」のことです。  

クライアント・サーバー間など、異なる環境・言語間でデータをやり取りする際のフォーマットとしてよく利用されます。  
（シンプルなフォーマットの為、Javascriptに限らず様々な言語で利用されています。 ）  

以下のように、javascriptでオブジェクトを定義するのと似た文法で記載します。  
```
[
  {"id" : "1", "name" : "suzuki"},
  {"id" : "2", "name" : "tarou"}
]
```  

また、配列やネストしたデータも表現できます。  
例  
```json

```

### Jsonの仕様
jsonの仕様は以下で定義されています。  
[原文](https://www.rfc-editor.org/rfc/rfc8259)  
[日本語訳](https://www.asahi-net.or.jp/~ax2s-kmtn/internet/rfc8259j.html)  


### Jsonの利用方法
異なる言語、環境で動作するプログラム間でデータをやりとりする際によく使われます。  
（クライアント・サーバー間など）  

異なる言語、環境で動作するプログラム間でやり取りするデータは、お互いのプログラムが認識できるものでなくてはいけません。  
そこでよく利用されるのが文字列です。）  

言語問わずほとんどのプログラムは文字列を認識できるので、送りたいデータを文字列に変換し送信し、受け取った側は文字列からデータを復元することでデータを受け渡せます。  

この際の文字列のフォーマットとして、Jsonがよく利用されます。  
(以前はxmlがよく利用されていましたが、2022念現在は文法がシンプルなJsonが利用されることが多いです。)  


<img src="画像/JSONとは_主な利用方法.png" style="width:480px;">  


そのような場合、お互いのプログラムが認識できるデータをやり取りしなくてはいけません。  

### Jsonを介したクライアント・サーバー間でのデータをやり取り
クライアントプログラム・サーバープログラム間でデータをやり取りする際にもJsonはよく利用されます。  
ここではクライアントのJavascriptとサーバーのC#(ASP.NET)でデータをやり取りする際の例を説明します。  

<img src="画像/JSONとは_JavascriptとC#の例.png">  


例えばブラウザのjavascriptからWebサーバーのへデータを送る際は、以下の手順で利用します。  
（いろいろな渡し方はありますが、ここではリクエストボディにjsonの文字列を記載して送信することとします。）

1. （クライアント）Javascriptで送信したい値をもったオブジェクトを作成


1. （クライアント）そのオブジェクトをJson文字列に変換  
大半の言語には、オブジェクトをJson文字列にしたり、Json文字列からオブジェクトを作る為のライブラリが存在します。  
Javascriptでは標準の関数として用意されています。  

1. （クライアント）Json文字列をリクエストボディに記載して送信。  
     
   例  
   ```
   const searchCond = {
     searchWord: "商品1",
     maxPrice: "3000"
   }
   ```
  
  
1. （サーバー）リクエストボディからJson文字列を取得

1. （サーバー）その文字列をJavaのオブジェクトに変換  
対応するgetter、setterを持ったクラスのインスタンスとして作成します。  

1. （サーバー）そのオブジェクトを元に必要な処理（検索SQLの発行など）を行う。  
   例  
   ```

   ```

WebサーバーのJavaからクライアントのJavascriptに値を返す際はも同様です。  
必要な値をもったJavaのオブジェクトをJson文字列に変換し、レスポンスボディに記載します。  
javascriptはその文字列をJavascriptのオブジェクトに変換し必要な処理を行います。 



